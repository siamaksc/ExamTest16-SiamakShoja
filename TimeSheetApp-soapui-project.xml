<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="ec721556-7418-4f0b-8f94-d21831c7de0a" activeEnvironment="Default" name="TimeSheetApp" resourceRoot="" soapui-version="5.3.0" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:RestService" id="a8b07725-8cfb-492e-8956-12f165d21ebc" wadlVersion="http://wadl.dev.java.net/2009/02" name="Get-AllEmployee" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>https://shielded-harbor-21142.herokuapp.com</con:endpoint></con:endpoints><con:resource name="All" path="/employees/all" id="82d00e1f-348e-4ef5-9fe0-a2bb54b9a4cb"><con:settings/><con:parameters/><con:method name="All 1" id="60163579-79c4-4801-85c4-a9351c481d02" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element>Response</con:element></con:representation><con:request name="Request 1" id="0168e052-5d5c-4e04-981c-b1cb7322ad60" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://shielded-harbor-21142.herokuapp.com</con:endpoint><con:request/><con:originalUri>https://shielded-harbor-21142.herokuapp.com/employees/all</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="bef10b3a-7b8b-4357-b1c6-c2fe203f72da" wadlVersion="http://wadl.dev.java.net/2009/02" name="Post-NewEmployee" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>https://shielded-harbor-21142.herokuapp.com</con:endpoint></con:endpoints><con:resource name="Create" path="/employees/create" id="10004bbc-9636-4027-9c97-79ce08a0a814"><con:settings/><con:parameters/><con:method name="Create 1" id="af79a7d7-bb48-4ec6-9146-623e15146cd3" method="POST"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>405 400</con:status><con:params/><con:element xmlns:cre="https://shielded-harbor-21142.herokuapp.com/employees/create">cre:Fault</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="e03b11f0-2a4d-4e87-acd3-a2aa96e3e72b" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://shielded-harbor-21142.herokuapp.com</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="858fcbcc-4864-4b8c-b8db-9fbace6abdc3" wadlVersion="http://wadl.dev.java.net/2009/02" name="Delete-Employee" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>https://shielded-harbor-21142.herokuapp.com</con:endpoint></con:endpoints><con:resource name="Delete" path="/employees/delete" id="b96ff6e1-95ff-4aac-a292-54b6c7652aac"><con:settings/><con:parameters/><con:method name="Delete 1" id="34ecffa3-f8de-4383-bb3a-4184c7eebead" method="DELETE"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:del="https://shielded-harbor-21142.herokuapp.com/employees/delete">del:Fault</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="53f8c003-4591-4647-b2ab-eb7c9ce6bc2c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://shielded-harbor-21142.herokuapp.com</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:testSuite id="292455e1-dd41-4cea-8a26-61c716f4590f" name="TimeSheetApp-TestSuite"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="da458b1a-913b-4438-a562-1d327fd3bf32" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TimeSheetApp-TestCase" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Static-EmpData-POST-TestStep" id="be606213-a270-4fa6-992f-846d25dce762"><con:settings/><con:config><script>def firstName= "Siamak"
def lastName= "Shoja"
def gender= "Male"
def role= "Tester"
def email= "siamak@gmail.com"

log.info("Employee firstName : " + " " + firstName)

log.info("Employee lastName : " + " " + lastName)

log.info("Employee gender : " + " " + gender)

log.info("Employee role : " + " " + role)

log.info("Employee email : " + " " + email)

com.eviware.soapui.SoapUI.globalProperties.setPropertyValue("FirstName",firstName.toString())
com.eviware.soapui.SoapUI.globalProperties.setPropertyValue("LastName",lastName.toString())
com.eviware.soapui.SoapUI.globalProperties.setPropertyValue("Gender",gender.toString())
com.eviware.soapui.SoapUI.globalProperties.setPropertyValue("Role",role.toString())
com.eviware.soapui.SoapUI.globalProperties.setPropertyValue("Email",email.toString())


</script></con:config></con:testStep><con:testStep type="restrequest" name="Post-NewEmployee" id="bc5a2e9a-3034-4fbe-af04-6c29b8200f50"><con:settings/><con:config service="Post-NewEmployee" resourcePath="/employees/create" methodName="Create 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Post-NewEmployee" id="e03b11f0-2a4d-4e87-acd3-a2aa96e3e72b" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://shielded-harbor-21142.herokuapp.com</con:endpoint><con:request>{    "email": "${Email}", 
	"firstName": "${FirstName}",
	"gender": "${Gender}",
      "lastName": "${LastName}",
      "role": "${Role}"
   }</con:request><con:originalUri>https://shielded-harbor-21142.herokuapp.com/employees/create</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="a0ea86a7-7014-4b95-a0e0-a5a9ae81c3d1" name="Valid HTTP Status Codes"><con:configuration><codes>204</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Get-AllEmployee" id="263377a6-656e-4fd4-b689-c894abce458c"><con:settings/><con:config service="Get-AllEmployee" resourcePath="/employees/all" methodName="All 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get-AllEmployee" id="0168e052-5d5c-4e04-981c-b1cb7322ad60" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://shielded-harbor-21142.herokuapp.com</con:endpoint><con:request/><con:originalUri>https://shielded-harbor-21142.herokuapp.com/employees/all</con:originalUri><con:assertion type="Simple Contains" id="9247117d-b647-4e86-9707-f6f8c2768e9b" name="Contains"><con:configuration><token>Developer</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="5eb486b2-0b78-498b-b0c0-8ad25d962691" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Dynamic-EmpData-DELETE-TestStep" id="cf5659f0-54c2-447e-9ad1-e10853e15037" disabled="true"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import groovy.json.JsonBuilder
import groovy.json.JsonOutput

def responseContent = testRunner.testCase.getTestStepByName("Get-AllEmployee").getPropertyValue("Response")
def employeeData = new JsonSlurper().parseText(responseContent)
log.info(employeeData)

for(int i = 0; i  &lt; employeeData.size(); i++) {	
if ( employeeData.get(i).firstName == "Siamak") {		
	def deleteEmployee = new JsonOutput().toJson(employeeData.get(i))
			
	log.info("   "+"Employee Email = "+"   " + deleteEmployee)
	        	
	com.eviware.soapui.SoapUI.globalProperties.setPropertyValue( "DeleteEmployee", deleteEmployee)
  }
}
</script></con:config></con:testStep><con:testStep type="restrequest" name="Delete-Employee" id="8a728fbe-a603-4168-bd6c-37cd07b4ae43"><con:settings/><con:config service="Delete-Employee" resourcePath="/employees/delete" methodName="Delete 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Delete-Employee" id="53f8c003-4591-4647-b2ab-eb7c9ce6bc2c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://shielded-harbor-21142.herokuapp.com</con:endpoint><con:request>{    "email": "${Email}", 
	"firstName": "${FirstName}",
	"gender": "${Gender}",
     "lastName": "${LastName}",
     "role": "${Role}"
}</con:request><con:originalUri>https://shielded-harbor-21142.herokuapp.com/employees/delete</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="0d1b1b12-a82a-4397-a2a4-d3cb0868f7ae" name="Valid HTTP Status Codes"><con:configuration><codes>204</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:properties/><con:wssContainer/><con:oAuth2ProfileContainer/><con:oAuth1ProfileContainer/></con:soapui-project>